@use "sass:math";
$card-min-width-horizontal: 70vw;
$card-min-height-vertical: 70vh;
$card-aspect-ratio: math.div(16, 9);
// $card-min-width: clamp(90rem, 50vw, 200rem);
$card-border-radius: 2rem;
$blur-size: 200px;

.card{
    width: $card-min-width-horizontal;
    height: calc($card-min-width-horizontal / $card-aspect-ratio);
    border-radius: $card-border-radius;
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center center;
    background-image: var(--background);
    display: grid;
    padding: 3% 5%;
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(2, 1fr);
    grid-template-areas: ". like"
               "title rating";
    color: white;
    font-size: 3rem;
    position: relative;



    @media (max-aspect-ratio: 1 / 1) {
        height: $card-min-height-vertical;
        width: calc($card-min-height-vertical * $card-aspect-ratio);
    }

    & > * {
        filter: drop-shadow(1px 1px 10px black);

        // text-shadow: 1px 1px 50px black;
    }

    .title{
        grid-area: title;
        align-self: end;
    }

    .like{
        grid-area: like;
        justify-self: end;
    }

    // .

    .rating{
        grid-area: rating;
        align-self: end;
        justify-self: end;
    }
    .bluredImage{
        border-radius: $card-border-radius;
        z-index: -1;
        content: '';
        position: absolute;
        background-repeat: no-repeat;
        background-size: cover;
        width: 100%;
        top: 0px;
        right: 0px;
        bottom: 0px;
        left: 0px;
        background-image: var(--background);
        filter: blur($blur-size);
        transform-origin: center center;
        animation: backgroundAnimation 4s ease-in-out 0ms infinite;
        transform: scaleX(1.3) scaleY(2);
    }
    
    &:hover .bluredImage{
        animation: backgroundAnimation 4s ease-in-out 0ms infinite forwards, hoverBackgroundAnimation 1s ease-in-out 0ms infinite alternate-reverse;
    }

    @keyframes hoverBackgroundAnimation {
        from {
            filter: blur($blur-size);
        } to {
            filter: blur($blur-size) brightness(2);
        }
    }

    @keyframes backgroundAnimation {
        from{
            filter: blur($blur-size) hue-rotate(0deg);
        } 25% {
            filter: blur($blur-size * 0.9) hue-rotate(25deg);
        } 75% {
            filter: blur($blur-size * 0.9) hue-rotate(-25deg);
        }
        to {
            filter: blur($blur-size) hue-rotate(0deg);
        }
    }

    .video {
        width: 100%;
        height: 100%;
        z-index: 0;
    }
    // &:after{
    //     display: block;
    //     content: "";
    //     padding-top: calc(100% * (9 / 16));
    // }

}